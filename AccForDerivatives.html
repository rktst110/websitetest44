
 <script src="functions/importFiles.js"></script>
 <div id="importedContent"></div>
 

<style>
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background-color: #555;
  color: white; /* Set the text color to white */
}
</style>

<div>
<br><br>
<div id="accounts">
nfilms30: Org0 (31 Jul (04:00:00 PM) Monday) <br>
nfilms036: Org0 (01 Aug (04:00:00 PM) Tuesday) <br>
newfilms71: Org0 (02 Aug (04:00:00 PM) Wednesday) <br>
nfilms582: Org0 (03 Aug (04:00:00 PM) Thursday) <br>
movieshub389: Org0 (04 Aug (04:02:00 PM) Friday) <br>
movieshubs885: Org0 (05 Aug (04:00:00 PM) Saturday) <br>
hubmovies62: Org0 (06 Aug (04:00:00 PM) Sunday) <br>
</div>
</div>

<div id="ptag"></div>



<script>
var newAccounts = ''
var accountsArray = document.getElementById('accounts').innerHTML.replace(/\n/g,'').split(' <br>')
for(var i=0;i<accountsArray.length-1;i++)
{
	var accountStr = accountsArray[i]
	var weeksPassed;
	weeksPassed = calculateWeeks ( accountStr.split(' (')[1].split(' (')[0] + ' 2023' )
	if(accountStr.split(':')[0]=='nfilms582' || accountStr.split(':')[0]=='movieshubs885')
	{
		weeksPassed = ( calculateWeeks ( accountStr.split(' (')[1].split(' (')[0] + ' 2023' ) - 1)
	}
	
	var newAccountStr ;
	
	var currentDay =  getCurrentDay()
	if(  accountStr.includes(currentDay) ==true )
	{
		var str1 = 'Org' + weeksPassed + ' (' + getCurrentDate()  + ' (0' +  accountStr.split('0 (')[1].split('(0')[1]
		var str2 = accountStr.split(':')[0] + ': <mark>' + str1+'</mark><br><br>'
		var copyStr = 	 'navigator.clipboard.writeText(\''+str1+'\')'
		newAccountStr = '<span onclick="'+copyStr+'">'+str2+'</span>'
	}
	else
	{
		var str1 = 'Org' + weeksPassed + ' (' + getCurrentDate()  + ' (0' +  accountStr.split('0 (')[1].split('(0')[1]
		var str2 = accountStr.split(':')[0] + ': ' + str1+'<br><br>'
		
		//newAccountStr = accountStr.split(':')[0] + ': Org' + weeksPassed + ' (' + getCurrentDate()  + ' (0' +  accountStr.split('0 (')[1].split('(0')[1] +'<br>'
		var copyStr = 	 'navigator.clipboard.writeText(\''+str1+'\')'
		newAccountStr = '<span onclick="'+copyStr+'">'+str2+'</span>'
	}
	
	newAccounts += newAccountStr 
	console.log( newAccountStr )
}

document.getElementById('accounts').innerHTML = newAccounts

function calculateWeeks( passedDateStr ) 
{
	// Define the specific date (July 31, 2023)
//var specificDate = new Date('2023-07-31');
var specificDate = new Date( passedDateStr );

// Get the current date
var currentDate = new Date();

// Calculate the time difference in milliseconds
var timeDiff = currentDate - specificDate;

// Calculate the number of weeks
var weeksPassed = Math.floor(timeDiff / (1000 * 60 * 60 * 24 * 7));

//console.log(`Weeks passed since July 31, 2023: ${weeksPassed}`);

return weeksPassed;
}


function getCurrentDate()
{
	function formatDate(date) {
  var months = [
    "Jan", "Feb", "Mar", "Apr", "May", "Jun",
    "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
  ];

  var day = date.getDate();
  var month = months[date.getMonth()];

  return `${day < 10 ? '0' : ''}${day} ${month}`;
}

var currentDate = new Date();
var formattedDate = formatDate(currentDate);
//console.log(formattedDate); // Outputs something like "09 Aug"
return formattedDate
}

function getCurrentDay()
{
function formatDate(date) {
  var daysOfWeek = [
    "Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"
  ];

  var months = [
    "Jan", "Feb", "Mar", "Apr", "May", "Jun",
    "Jul", "Aug", "Sep", "Oct", "Nov", "Dec"
  ];

  var dayOfWeek = daysOfWeek[date.getDay()];
  var day = date.getDate();
  var month = months[date.getMonth()];

  return `${dayOfWeek}, ${day < 10 ? '0' : ''}${day} ${month}`;
}

var currentDate = new Date();
var formattedDate = formatDate(currentDate);
formattedDate = formattedDate.split(',')[0]
console.log(formattedDate); // Outputs something like "Monday, 09 Aug"
return formattedDate
}

</script>

<script>
function capitalize(string) {
    return string.charAt(0).toUpperCase() + string.slice(1).toLowerCase();
}

</script>

<script>
/*
rakeshkumarfb: Org 9 (Sunday 18-Jun-2023 08:49:34 PM)
moxafa5631: Org 6 (Tuesday 13-Jun-2023 08:51:10 AM)
moxafa5631: Org 8 (Tuesday 27-Jun-2023 08:53:00 PM)
coyisi4601: Org 9 (Tuesday 13-Jun-2023 08:52:40 AM)

account 1 = rakeshkumarfb
account 2 = coyisi4601
account 3 = moxafa5631
*/

/*
'org': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  */
 

var accountsWithDetails = {
  'nfilms30': {
  'nfilms30': {
  'createdAt': '31 Jul (09:00:00 PM)',
  'userName': 'c383ahj1',
  'userID': 'H4EaugxNki5XCjyGd',
  'personalAPIToken': 'apify_api_YO8HoROmQz6ZhexMHIeAi0ORGmVeH32J0Smk',
  'organizationAPIToken': '',
  },
  
'org1': {
  'createdAt': '07 Aug (04:00:00 PM)',
  'userName': 'Kk1uad38j',
  'userID': 'AC9P42C62wa5kMD58',
  'personalAPIToken': 'apify_api_IcZ403eOl1tPHEBgzpIarZEeNfeQ3D202z45',
  'organizationAPIToken': 'apify_api_sEqbqIefD37CIFyVQbiAjjEIoiet8M2eCPAL',
  },
  
  'org2': {
  'createdAt': '14 Aug (04:00:00 PM)',
  'userName': 'B19zhsj2h',
  'userID': 'LFF76LmTd8MHffXim',
  'personalAPIToken': 'apify_api_EgzUzNHLycEQ9jdVFzTji0QN7kZQhA3P4byA',
  'organizationAPIToken': 'apify_api_gitLTDqg6ccaOlSfTtdTTcuOPOvgnQ3OccKl',
  },
  
  'org3': {
  'createdAt': '21 Aug (04:00:00 PM)',
  'userName': 'kj12jh4a7sa',
  'userID': 'shyWFnWjq59kQuSEy',
  'personalAPIToken': 'apify_api_YSFF4gWbFbcCPMAw1KB7gBHdxThEEw0KHBMp',
  'organizationAPIToken': 'apify_api_CD6pdyZFLpQekyVk6AG0JbyduSe0aU1d1qEq',
  },
  
  'org4': {
  'createdAt': '28 Aug (04:00:00 PM)',
  'userName': 'sf652jk1g',
  'userID': 'DHN6p8YfHJ8Y9MbB4',
  'personalAPIToken': 'apify_api_jnOTbdkJXIhFAUQeYtBxiWNEtGmbY432BGVQ',
  'organizationAPIToken': 'apify_api_fKcleTXnReu7Nhub57bt4O9wjTEvn30K15He',
  },
  
  'org5': {
  'createdAt': '04 Sep (04:00:00 PM)',
  'userName': 'Ok2hu2o1j',
  'userID': 'dGi3o8e9uNntoTLho',
  'personalAPIToken': 'apify_api_aGgBIu6yH6qoiuzhwSzo9x4igp5FXX1zjRUf',
  'organizationAPIToken': 'apify_api_rAWxecQy1vKz0GfnLvDRMTsUC8ZeLh4GnkId',
  },
  
  'org6': {
  'createdAt': '11 Sep (04:00:00 PM)',
  'userName': 'L9p23hsj3',
  'userID': 'xwS7xixtFPJXXWRvt',
  'personalAPIToken': 'apify_api_oOQM8ZuBMdyilmSajjutyceTTJb1uY4adVvm',
  'organizationAPIToken': 'apify_api_XRfy5XNMqdwMFMaBbwipP4RTn9pXeO3SGQpQ',
  },
  
  'org7': {
  'createdAt': '18 Sep (04:00:00 PM)',
  'userName': 'dg54sdf2g',
  'userID': 'ttpczRWuQ4nYDopLB',
  'personalAPIToken': 'apify_api_ZFhjT7DbMKgxbw4bSzahxWgDxMMatm3dXQjn',
  'organizationAPIToken': 'apify_api_Au54Aj1s00GrWaD2jnyVLfaasNf6K02Lorce',
  },
  
  'org8': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org9': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org10': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  

  
  },
  
  "nfilms036": {

 'nfilms036': {
  'createdAt': '01 Aug (08:14:00 PM)',
  'userName': 'ivsdf32',
  'userID': 'bBwjrPEJ4vkEEFthR',
  'personalAPIToken': 'apify_api_MZcHha9y9N1O4cE2hGG6v9ELiJ8Pwx2ccZPH',
  'organizationAPIToken': '',
  },
  
'org1': {
  'createdAt': '08 Aug (04:00:00 PM)',
  'userName': 'A8hw10djg',
  'userID': 'eAgitwddvBNkpooSK',
  'personalAPIToken': 'apify_api_U9EEGkyyCQFGWsnvSdHfHYgs2gcxxH4kaCX5',
  'organizationAPIToken': 'apify_api_bkwxCMPkW8bi36yndcdTTPjdm4BbDP3Lt6Hk',
  },
  
  'org2': {
  'createdAt': '15 Aug (04:00:00 PM)',
  'userName': 'Kl86ds8br',
  'userID': 'o9Ly7ARBAgrmaxPej',
  'personalAPIToken': 'apify_api_jWmij4nuYCFBjwaYqHyRDVhS9XqenO4zJK0U',
  'organizationAPIToken': 'apify_api_QpFlU35eEt03LdBGCrhNS9dNDWkq552qfX62',
  },
  
  'org3': {
  'createdAt': '22 Aug (04:00:00 PM)',
  'userName': 'ew21sf2da5',
  'userID': 'qJ694JmJEeiGSSiWe',
  'personalAPIToken': 'apify_api_aEAypd8rXuIk9f2wLgOz3m6GWSkLWJ4tipja',
  'organizationAPIToken': 'apify_api_2aWX3GWlcoTVZ7Mwe1qqeCnHVJlKNq2FgR5v',
  },
  
  'org4': {
  'createdAt': '29 Aug (04:00:00 PM)',
  'userName': 'L9p0uqs3r',
  'userID': 'xxJhNvyypWkwzTakn',
  'personalAPIToken': 'apify_api_6ftRLEdi1avJhiTKhR4Et7SGKEHmdT3DzlkE',
  'organizationAPIToken': 'apify_api_fzfaoXEymbEjHWAPY7N79SaPmQUvBn3bsyzM',
  },
  
  'org5': {
  'createdAt': '05 Sep (04:00:00 PM)',
  'userName': 'Oi2jju4us',
  'userID': 'qubYfwhGHP326zWJP',
  'personalAPIToken': 'apify_api_WbphJ6Kyck6NJJdOeTcqai6Zacefee12078G',
  'organizationAPIToken': 'apify_api_Vx2LnIc5gk0LugMYgCW3waVFRG95xj3raJO9',
  },
  
  'org6': {
  'createdAt': '12 Sep (04:00:00 PM)',
  'userName': 'U8ow06eh',
  'userID': 'Yr7WuoX4G6K6aNxKL',
  'personalAPIToken': 'apify_api_qd04fisg8CAZjjKB9YSJUkf8VZTTTJ3IaiZ5',
  'organizationAPIToken': 'apify_api_K9K2Yk7OyvDVfcjW6ZIVu4PtKf5bFN2CHjRZ',
  },
  
  'org7': {
  'createdAt': '19 Sep (04:00:00 PM)',
  'userName': 'sf45g321ash',
  'userID': 'LymtD5aXYRWHkvDcW',
  'personalAPIToken': 'apify_api_j0n4D9D4VSMBmbd4bBQiiBX0FWDJ3e0z74x4',
  'organizationAPIToken': 'apify_api_nSTFPcuEjFZveasFAQcWCLmvdLrMWN1CewN8',
  },
  
  'org8': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org9': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org10': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  

  },
  
  "newfilms71": {
  
  'newfilms71': {
  'createdAt': '02 Aug (08:12:00 PM)',
  'userName': 'co2asd23',
  'userID': 'ReSW6xYC5vMbnLipt',
  'personalAPIToken': 'apify_api_ZcOg3VBjLTbzqLSNE6JXKVqJIdLto70Nivjk',
  'organizationAPIToken': '',
  },
  
'org1': {
  'createdAt': '09 Aug (04:00:00 PM)',
  'userName': 'Ha3ulka1h',
  'userID': 'EqnJahuxAosyrWWvh',
  'personalAPIToken': 'apify_api_X2XxC6qmfAUji75tWBVa0O662IMerP1H5xwH',
  'organizationAPIToken': 'apify_api_bIPSSICJayfGqCihKztUgzTb4rxIbb3swhOk',
  },

  'org2': {
  'createdAt': '16 Aug (04:00:00 PM)',
  'userName': 'a21bvbn1v',
  'userID': 'wQ4m5zivLa5SLD92Y',
  'personalAPIToken': 'apify_api_Q2ZfbgHKqEdzh1v71X95Pef0uZDWWP3f73oC',
  'organizationAPIToken': 'apify_api_sVCVhUcT1cQStPeT68CbHxwjtZWBnA2IC4tO',
  },
  
  'org3': {
  'createdAt': '23 Aug (04:00:00 PM)',
  'userName': 'ek2u1z3cd',
  'userID': 'LMHrpfdZsBD9sff7i',
  'personalAPIToken': 'apify_api_NSHi8giNCIwXBFRAJoxdsV4h4pdA0X0QKhPk',
  'organizationAPIToken': 'apify_api_ce0xoupt4e6TWiIN0NcEKV8AIeIyOh2SO7iM',
  },
  
  'org4': {
  'createdAt': '30 Aug (04:00:00 PM)',
  'userName': 'K9pel3wu',
  'userID': 'z7QciyfJYCF8y5S99',
  'personalAPIToken': 'apify_api_xR5uYP9ROQshsD9569gQqZ7oPBYKTo2jEJUo',
  'organizationAPIToken': 'apify_api_C2F2bqVrMp170qds2U9z8ljINSgF0O12ODkG',
  },
  
  'org5': {
  'createdAt': '06 Sep (04:00:00 PM)',
  'userName': 't2g12vhj13g',
  'userID': 'GoHHXC2vNApznFhSr',
  'personalAPIToken': 'apify_api_Bvvyw1GJeNbKdEqUMip746bp39Xwob3WSgZG',
  'organizationAPIToken': 'apify_api_6LAMsfdZKdXxZDTRLuwEaFOf1y43c23SW7dy',
  },
  
  'org6': {
  'createdAt': '13 Sep (04:00:00 PM)',
  'userName': 'Jwwj0ei4qs',
  'userID': 'MGe5xeekG5RaKjiBk',
  'personalAPIToken': 'apify_api_sS0Bjv0E4vfjZNMznlrYYLhDFaqcjn2zIcia',
  'organizationAPIToken': 'apify_api_ZkCBWDy6nNxHap0OftbLGtbs1HnklW4ffhLY',
  },
  
  'org7': {
  'createdAt': '20 Sep (04:00:00 PM)',
  'userName': 'f32d1a1sa2',
  'userID': 'Bj52oke5nkRzet8Ro',
  'personalAPIToken': 'apify_api_3ahtU7vhYEPZQFRB2NtGgJSg7LNBeZ2GT1WK',
  'organizationAPIToken': 'apify_api_gRggKU8r8bqwON3j5tKgBubu0oTQg90JS1Oj',
  },
  
  'org8': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org9': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org10': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  },
  
  "nfilms582": {
  
  'nfilms582': {
  'createdAt': '03 Aug (08:15:11 PM)',
  'userName': 'cys32as',
  'userID': 'jC2HBmq3TstJF9JzB',
  'personalAPIToken': 'apify_api_jhcPwaGlMtNCMNesz2BmM1744ritLe0bxJE0',
  'organizationAPIToken': '',
  },
  
'org1': {
  'createdAt': '10 Aug (04:00:00 PM)',
  'userName': 'U24hsj2hs',
  'userID': 'aa8BzkFXRjGLxKmxn',
  'personalAPIToken': 'apify_api_N5AyrR1nqiDqbiGPuugE1j7aLWUnJz4BF4VF',
  'organizationAPIToken': 'apify_api_iXq9FhfccemslYRZMycCVpIomrKRfB0eoR2t',
  },
  
  'org2': {
  'createdAt': '17 Aug (04:00:00 PM)',
  'userName': 'uuy265hg1s',
  'userID': 'o6FR97CMPPvPoqmch',
  'personalAPIToken': 'apify_api_ODhFpxCuPi5HwqkbgAvQEwGYUeNdsm3NqiCv',
  'organizationAPIToken': 'apify_api_d0tp4M8sZHu0BheqnBQlk59KdHacOe3nFeUD',
  },
  
  'org3': {
  'createdAt': '24 Aug (04:00:00 PM)',
  'userName': 'ad24z5a2s',
  'userID': 'HCNH8xkBSGQLqqfJN',
  'personalAPIToken': 'apify_api_xaAth40KA0JMfC6RMrG3hL7ySNm0Tz0QWhev',
  'organizationAPIToken': 'apify_api_y5e6pmxzWkxUhlITGRNWpo3Ph1q7VT12l98I',
  },
  
  'org4': {
  'createdAt': '31 Aug (04:00:00 PM)',
  'userName': 'Jaja2uab2',
  'userID': 'ZgjGP7ziwzTEqtS85',
  'personalAPIToken': 'apify_api_5B2wQ9dDttQJ2wg07jluPfJbESk30U3OPXD3',
  'organizationAPIToken': 'apify_api_epiqRngRezbeTsI6KiQIW08MKJRfcW2hPpIO',
  },
  
  'org5': {
  'createdAt': '07 Sep (04:00:00 PM)',
  'userName': 'Oaja937db',
  'userID': 'aQ493AtsyDQykcQfr',
  'personalAPIToken': 'apify_api_Yf36DgS4LU4UqVIve2nA4qbBW0dfm93CSYJp',
  'organizationAPIToken': 'apify_api_gWMJwkQNJ7bccJntpCJXeNgDt06Hu63ahkAE',
  },
  
  'org6': {
  'createdAt': '14 Sep (04:00:00 PM)',
  'userName': 'G73ind3y1u',
  'userID': 'jvKmoTeiFS8MLNcen',
  'personalAPIToken': 'apify_api_nBPgCJBiISZFSKcd3vyWIBwg8f1coV3w3FF2',
  'organizationAPIToken': 'apify_api_EDZy4ZWFtLeCJ6K5eqUNpBk0l5Dl4Q3iBE0q',
  },
  
  'org7': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org8': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org9': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org10': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  

  },
  
  "movieshub389": {
  
  'movieshub389': {
  'createdAt': '04 Aug (08:26:00 PM)',
  'userName': 'hyg4ef',
  'userID': 'Eoz3avTc5T8JnWBuT',
  'personalAPIToken': 'apify_api_hjBcXUAuN18ff3FUrDvlWZEaiWwH9X0s2uGM',
  'organizationAPIToken': '',
  },
  
	'org1': {
  'createdAt': '11 Aug (04:00:00 PM)',
  'userName': 'L2i1jse3u',
  'userID': 'GX3vhbHc7HTrPv2Qr',
  'personalAPIToken': 'apify_api_IFQTlxyWsBkwCdbUUMBLSaTM1xlWy13FbeNw',
  'organizationAPIToken': 'apify_api_g7CJg2Xykh7jB8MkDPektK3MYNcVq61BMtyf',
  },
  
  'org2': {
  'createdAt': '18 Aug (04:00:00 PM)',
  'userName': 'Oue7720js',
  'userID': 'inD3M3ENCwgyRPFiD',
  'personalAPIToken': 'apify_api_L7qvBAt759SxoFptj2wmPC2fMRYrbd0FaLc5',
  'organizationAPIToken': 'apify_api_Rof65AhayEXqmfU50Sa0RWrxwMAnOY3YW4uR',
  },
  
  'org3': {
  'createdAt': '25 Aug (04:00:00 PM)',
  'userName': 'O2hs3hs0n',
  'userID': 'miAKbPLLvFBqgpNm6',
  'personalAPIToken': 'apify_api_2AUnGRYU5qJRd0nlxCALG8ghf4Hmrq1ZX8Yb',
  'organizationAPIToken': 'apify_api_va6ZDPTUf5OvTMBMtxK0vTdJSQBRTm2Xt50N',
  },
  
  'org4': {
  'createdAt': '01 Sep (04:00:00 PM)',
  'userName': 'Jab204jde',
  'userID': 'ERnTybFc229ekuqEz',
  'personalAPIToken': 'apify_api_fIacDk8xAVlAJddcxvzxeEciVk5nJf1YCjNI',
  'organizationAPIToken': 'apify_api_xij3kW8kDGb1MDPSSkDBpRpMYi6s4H2fUi2u',
  },
  
  'org5': {
  'createdAt': '08 Sep (04:00:00 PM)',
  'userName': 'L9pjs27rjsw',
  'userID': 'jid7Tftt555R2bwok',
  'personalAPIToken': 'apify_api_kLo377hRd8Hx69F2KmsCcHbR5iKAhk0XWamy',
  'organizationAPIToken': 'apify_api_PUkllNRUga6DyCEo8sDqPaPqiYt5wo1JNzAo',
  },
  
  'org6': {
  'createdAt': '15 Sep (04:00:00 PM)',
  'userName': 'Ko304lse7h',
  'userID': 'PJWMvXGunJSaTiTgi',
  'personalAPIToken': 'apify_api_UsVwnqCeqE5j5pCzrAQ8dp8R7LQt5Q05tfMB',
  'organizationAPIToken': 'apify_api_xCBqHb4Ns4mJkZnU1lBbiIS0tlkqVj2PvCCg',
  },
  
  'org7': {
  'createdAt': '22 Sep (04:00:00 PM)',
  'userName': 'Jai3jsie2gu',
  'userID': 'B7nboXhMqi6cpkS57',
  'personalAPIToken': 'apify_api_rPkhpxVWRka6cXMjZZt0p9IQvVrQY62jcs7v',
  'organizationAPIToken': 'apify_api_ejejPwtYLXrbFfYnajzXRY4OueAC3O1Vou7x',
  },
  
  'org8': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org9': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org10': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  

  },
  
  "movieshubs885": {
  
  'movieshubs885': {
  'createdAt': '05 Aug (03:49:00 PM)',
  'userName': 'khsdf432',
  'userID': 'mWsNpNuZXfdkdaTKB',
  'personalAPIToken': 'apify_api_sKEradVEVpaiwip5HAVliCZgTuaPsg1EnbaH',
  'organizationAPIToken': '',
  },
  
  'org1': {
  'createdAt': '12 Aug (04:00:00 PM)',
  'userName': 'K769ahq1y',
  'userID': 'q6Eh7QBKKXkygytYR',
  'personalAPIToken': 'apify_api_HqeKrhShjQoeHlbNKqCwHUegHiSMTE0H4ghE',
  'organizationAPIToken': 'apify_api_WQL9Q4Tjs6FGaqsHHXx3E1mxZFHfFx0JFEn7',
  },
  
  'org2': {
  'createdAt': '19 Aug (04:00:00 PM)',
  'userName': 'U190abu2h',
  'userID': 'fvSmAxdeZn65Wbg4a',
  'personalAPIToken': 'apify_api_KRgZgPnc9ukiheePI94MCm7O2uLaV34qmT9d',
  'organizationAPIToken': 'apify_api_VY3FozP0wJxCEkSENa8wbJYdKFAryh4A4l9k',
  },
  
  'org3': {
  'createdAt': '26 Aug (04:00:00 PM)',
  'userName': 'Td6g7fop5f',
  'userID': 'D3wnbf6zk9LFdX4zd',
  'personalAPIToken': 'apify_api_VOmV95UVDYia73ZimkNAOvZfN0iyFz1iJX14',
  'organizationAPIToken': 'apify_api_mOuT4FtWwfXTni2612awgtgDxwsNFv3PLueB',
  },
  
  'org4': {
  'createdAt': '02 Sep (04:00:00 PM)',
  'userName': 'hf24jhk21d',
  'userID': 'ubMZNqGmZFAj4MqMA',
  'personalAPIToken': 'apify_api_hrgikKJb8f7sa6XzGVdJCRl9VVebbg3AL2Xd',
  'organizationAPIToken': 'apify_api_2CWyK5n8c7CMZFkmHO2q0pDwt0AOBD01yL3H',
  },
  
  'org5': {
  'createdAt': '09 Sep (04:00:00 PM)',
  'userName': 'Kk28hs2o0k',
  'userID': 'Dt9cDCptaxBiEuY2w',
  'personalAPIToken': 'apify_api_leNjFR6pVdQXcRuljk7j5dwmk4spo80jJ4IO',
  'organizationAPIToken': 'apify_api_QGs0UbkRduk88acWwzNhnkgS7EP9tF0cIwDH',
  },
  
  'org6': {
  'createdAt': '16 Sep (04:00:00 PM)',
  'userName': 'hj54hg205h',
  'userID': 'nSL8fK8269emkaGmZ',
  'personalAPIToken': 'apify_api_V0FWj5Il8Br6lyLGwcpBgRy22CZuTY2B7NiA',
  'organizationAPIToken': 'apify_api_eRgoWOCVofgEWwP1oRlcIT8pjNBNfl1ZCRv3',
  },
  
  'org7': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org8': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org9': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org10': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  

  },
  
  "hubmovies62": {
  
 'hubmovies62': {
  'createdAt': '06 Aug (12:01:00 PM)',
  'userName': 'viol2dq2',
  'userID': 'LjEQT5dvWGnXdCD9M',
  'personalAPIToken': 'apify_api_xVceaFvyqPOsOftRoUWDUhXOW7kvOB2NGdcj',
  'organizationAPIToken': '',
  },
  
  'org1': {
  'createdAt': '13 Aug (04:00:00 PM)',
  'userName': 'Kk18ah35h',
  'userID': 'NM9GaXbGsyhvGnBFd',
  'personalAPIToken': 'apify_api_SNypLFJaCDeq1BLv46M2iOgFtxNxQI3SHWK4',
  'organizationAPIToken': 'apify_api_PdQUO044OkAjgdCq0rE5owVRMcPGYl3ySKCI',
  },
  
  'org2': {
  'createdAt': '20 Aug (04:00:00 PM)',
  'userName': 'W17aj3jdj',
  'userID': 'XbzsRhbbbCwK7mKhu',
  'personalAPIToken': 'apify_api_i48xkyw9q145Mrf5hNXxtlx6XjFoGy2zMrZ3',
  'organizationAPIToken': 'apify_api_ydudmt4RBhDvwuFcQDxOZbw1zw90g70WgLCC',
  },
  
  'org3': {
  'createdAt': '27 Aug (04:00:00 PM)',
  'userName': 'jkh21g5hg',
  'userID': 'sD89bjn7Ecj88xRyQ',
  'personalAPIToken': 'apify_api_ZyMi5DkcVmXbPp86Hd94zRF6ww5TCj2DQ1a0',
  'organizationAPIToken': 'apify_api_s8SkzSafNTCYeXNgdwtRg18aMKffLa021xrY',
  },
  
  'org4': {
  'createdAt': '03 Sep (04:00:00 PM)',
  'userName': 'Kak910wnsh',
  'userID': 'GfmgLjwi6PfvWxk7d',
  'personalAPIToken': 'apify_api_9J1VcWfhBEuWa4pza6fT4aRb2x8qhT2Qv0HH',
  'organizationAPIToken': 'apify_api_ORJK0cX0N5DWVFFTKUbCduYRNAGzzP3jzh32',
  },
  
  'org5': {
  'createdAt': '10 Sep (04:00:00 PM)',
  'userName': 'fg236df3h45',
  'userID': 'KZkjeg2BqNiL4FirT',
  'personalAPIToken': 'apify_api_T9U7QrSoYRkpBNbi6OCHe1Y4Gy55gd2HLTlz',
  'organizationAPIToken': 'apify_api_z11ksfzNnxykhgeOwHmusSYK50q6xK0I0Qet',
  },
  
  'org6': {
  'createdAt': '17 Sep (04:00:00 PM)',
  'userName': 'sdf5ewf15f',
  'userID': 'AQPuxMYAAMEciDaNi',
  'personalAPIToken': 'apify_api_7DW89LPr6ZJhsrcbuv27FgvCUofiym0A9XES',
  'organizationAPIToken': 'apify_api_Z3y6XcePPBilvo4c0H5iRqT2HPQ74R2G3U2f',
  },
  
  'org7': {
  'createdAt': '24 Sep (04:00:00 PM)',
  'userName': 'Snn930nesj',
  'userID': 'mhwc4HrE5Ax3q8EFy',
  'personalAPIToken': 'apify_api_BwNFhu4e1i0UlqwtKP36GSWMclcphe0kwPJv',
  'organizationAPIToken': 'apify_api_DpLnO3S03HiXgb9mfN0bnQpklMlnqz1bhSaP',
  },
  
  'org8': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org9': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  
  'org10': {
  'createdAt': '',
  'userName': '',
  'userID': '',
  'personalAPIToken': '',
  'organizationAPIToken': '',
  },
  

  },

};

  
//code to convert accountsWithDetails into simple form (Starts Here)
var simplifiedAccountsObj = {}
for( var email in accountsWithDetails )
{
	var organizations = accountsWithDetails[email] 
	simplifiedAccountsObj [ email ] ={}
	for( var org in organizations )
	{
		var orgObject = organizations[org]
		var createdAt =  orgObject['createdAt']
		if( createdAt !='' )
		{
			var date =  createdAt.split(' ')[0] + ' '+createdAt.split(' ')[1]
			simplifiedAccountsObj [ email ] [date] = org + createdAt.split(date)[1]
		}
		
	}
}
//code to convert accountsWithDetails into simple form (Ends Here)

var accounts = simplifiedAccountsObj

/*

accounts = {
  "rakeshkumar": {
    '09 Jun': 'Rakesh (01:13:22 PM)',
    '22 Jun': 'org2 (02:00:23 PM)',
    '01 Jul': 'org3 (12:44:26 PM)',
    '14 Jun': 'org4 (09:55:57 AM)',
    '21 Jun': 'org5 (08:28:37 PM)',
    '28 Jun': 'org6 (08:48 PM)',
    '04 Jul': 'org7 (08:49 PM)',
    '11 Jul': 'org8 (08:49:30 PM)',
    '18 Jul': 'org9 (08:49:34 PM)',
    '25 Jul': 'org10 (08:49:35 PM) ',
  },
  "coyisi4601": {
    '10 Jun': 'temp (09:09:00 PM)',
    '11 Jun': 'org1 (11:00:34 AM)',
    '22 Jun': 'org2 (9:55:30 PM)',
    '01 Jul': 'org3 (12:45:44 PM)',
    '08 Jul': 'org4 (01:53:07 PM)',
    '15 Jun': 'org5 (10:00:53 PM)',
    '23 Jun': 'org6 (08:24 AM)',
    '30 Jun': 'org7 (08:52 AM)',
    '06 Jul': 'org8 (08:52 AM)',
    '13 Jul': 'org9 (08:52:40 AM)',
    '20 Jul': 'org10 (08:52:40 AM)',
  },
  "moxafa5631": {
    '07 Jul': 'temp (12:41:31 PM)',
    '07 Jul': 'org1 (03:13:52 PM)',
    '15 Jun': 'org2 (10:02:18 PM)',
    '23 Jun': 'org3 (08:26 AM)',
    '30 Jun': 'org4 (08:50 AM)',
    '06 Jul': 'org5 (08:50 AM)',
    '13 Jul': 'org6 (08:51:10 AM)',
    '20 Jul': 'org7 (08:51:10 AM)',
    '27 Jul': 'org8 (08:53:00 PM)',
    '04 Aug': 'org9 (08:53:00 PM)',
    '11 Aug': 'org10 (08:53:00 PM)',

  },
};
*/



var accountsByMonthWeek = {};
var accountsByMonthWeekArray = [];

var currentDate = new Date(); // Get the current date
//var currentDate = new Date("03 Jul"); // Get the current date

for (var account in accounts) {
  var transactions = accounts[account];
  for (var date in transactions) {
  
  const nextRenewal = getNextRenewalDate( date );
  
    var transactionDate = new Date(nextRenewal);
    var week = getWeekNumber(transactionDate);
    var month = transactionDate.toLocaleString('default', { month: 'short' }).toLowerCase();
    var weekRange = getWeekRange(transactionDate);
    if (!accountsByMonthWeek[month]) {
      accountsByMonthWeek[month] = {};
    }
    if (!accountsByMonthWeek[month][weekRange]) {
      accountsByMonthWeek[month][weekRange] = [];
    }
	
    //var transactionInfo = date + '-' + transactions[date] + ' ' + account;
    //var transactionInfo = date.split(' ')[0] + ' '+ capitalize(month) + '-' + transactions[date] + ' ' + account;
    var transactionInfo = date.split(' ')[0] + ' '+ capitalize(month) + '-' + transactions[date] + '_' + account;
    
	accountsByMonthWeekArray.push(transactionInfo);
	
	if (isCurrentWeek(week, currentDate)) {
      transactionInfo = '<mark>' + transactionInfo + '</mark>'; // Highlight current week's accounts
    }
    accountsByMonthWeek[month][weekRange].push(transactionInfo);
	
  }
}

console.log("accountsByMonthWeek",accountsByMonthWeek)

var output = '';
for (var month in accountsByMonthWeek) {
  output += '<p>' + month.toUpperCase() + ':</p>';
  var sortedWeekRanges = Object.keys(accountsByMonthWeek[month]).sort(sortWeekRange);
  for (var i = 0; i < sortedWeekRanges.length; i++) {
    var weekRange = sortedWeekRanges[i];
    var sortedTransactions = accountsByMonthWeek[month][weekRange].sort();
    var sortedTransactionsStr = sortedTransactions.toString().replace(/,/g,'<br>	 &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;')
	//console.log(sortedTransactions)
	//console.log(sortedTransactionsStr)
//    output += '<p>' + weekRange + ': ' + sortedTransactions.join(', ')+ '</p>';
    output += '<div>' + weekRange + ': ' + sortedTransactionsStr+ '</div>';
  }
}

document.getElementById("ptag").innerHTML = (output);

// Function to get the week number from a date
function getWeekNumber(date) {
  var onejan = new Date(date.getFullYear(), 0, 1);
  var week = Math.ceil(((date - onejan) / 86400000 + onejan.getDay() + 1) / 7);
  return week;
}

// Function to get the week range for a given date
function getWeekRange(date) {
  var startDate = new Date(date);
  startDate.setDate(startDate.getDate() - startDate.getDay() + 1); // Set to the first day of the week
  var endDate = new Date(startDate);
  endDate.setDate(endDate.getDate() + 6); // Set to the last day of the week
  var startDay = startDate.getDate();
  var endDay = endDate.getDate();
  var startMonth = startDate.toLocaleString('default', { month: 'short' }).toLowerCase();
  var endMonth = endDate.toLocaleString('default', { month: 'short' }).toLowerCase();
  var weekRange = startDay + ' ' + startMonth + '-' + endDay + ' ' + endMonth;
  return weekRange;
}

// Function to check if a given week is the current week
function isCurrentWeek(week, currentDate) {
  var currentWeek = getWeekNumber(currentDate);
  return week === currentWeek;
}

// Function to sort the week ranges in ascending order
function sortWeekRange(a, b) {
  var startA = parseInt(a.split(' ')[0]);
  var startB = parseInt(b.split(' ')[0]);
  return startA - startB;
}
//This modified code should provide the correct output with accurate week ranges and sorted transactions within each week range.




function getNextRenewalDate(passedRenewalDate) {
  const currentDate = new Date();
  //const currentDate = new Date("1 Aug");
  const currentDay = currentDate.getDate();
  const currentMonth = currentDate.getMonth() + 1; // Adding 1 because month index starts from 0

  // Set the renewal day and month
  //var renewalDate = new Date( "28 Jun" );
  var renewalDate = new Date( passedRenewalDate );
  //const renewalDay = 16;
  const renewalDay = renewalDate.getDate()
  //const renewalMonth = 7; // July (index 7-1=6)
  const renewalMonth = renewalDate.getMonth() + 1; // July (index 7-1=6)

  // Calculate the next renewal month and year
  let nextRenewalMonth = currentMonth;
  let nextRenewalYear = currentDate.getFullYear();

  if (currentDay > renewalDay || (currentDay === renewalDay && currentMonth !== renewalMonth)) {
    nextRenewalMonth += 1;
    if (nextRenewalMonth > 12) {
      nextRenewalMonth = 1;
      nextRenewalYear += 1;
    }
  }

  // Create the next renewal date
  const nextRenewalDate = new Date(nextRenewalYear, nextRenewalMonth - 1, renewalDay);

  return nextRenewalDate;
}


/*

function getAvaliableDate( specificDate )
{

//var array1 = ["6 aug 2023","2 Jul 2023", "5 aug 2023", "3 aug 2023","3 aug 2023","1 sep 2023"];
//var array1 = ["6 aug","2 Jul", "5 aug", "3 aug","3 aug","1 sep"];
//var array1 = [    "06 Aug-org8 (08:53:00 PM) moxafa5631",    "04 Aug-org9 (08:53:00 PM) moxafa5631", "11 Aug-org10 (08:53:00 PM) moxafa5631"];

var dateMonthArray = []
for (var i = 0; i < accountsByMonthWeekArray.length; i++) {
	var dateMonthStr = accountsByMonthWeekArray[i].split('-')[0]
        dateMonthArray.push( dateMonthStr )
    
}


var currentDate;
if( specificDate!=undefined )
{//if checking for specific date then run this block
currentDate = specificDate
}
else
{// otherwise check for current date & run this block

//var currentDate = "01 Aug 2023";
//currentDate = "04 Aug";
currentDate = formatDate( new Date() ) ;
}

function formatDate(date) {
  var months = ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'];
  var day = date.getDate().toString().padStart(2, '0');
  var month = months[date.getMonth()];
  return `${day} ${month}`;
}


// Step 1: Convert dates to JavaScript Date objects
var currentDateObj = new Date(currentDate);
var array1Dates = dateMonthArray.map(dateStr => new Date(dateStr));

// Step 2: Filter out dates greater than the currentDate
var filteredDates = array1Dates.filter(date => date > currentDateObj);

// Step 3: Sort the filtered dates in ascending order
filteredDates.sort((a, b) => a - b);

// Step 4: Get the first date from the sorted array as the next date
//var nextDate = filteredDates.length > 0 ? filteredDates[0].toDateString() : "No next date found";
var nextDate = filteredDates.length > 0 ? filteredDates[0].toDateString() : "Null";

console.log(nextDate);
return nextDate;
}

function getAvailableAccountsForToday_Previous()
{
var nextDate = getAvaliableDate()
var availableAccountsForToday = []
for (var i = 0; i < accountsByMonthWeekArray.length; i++) {
	var dateMonthStr = accountsByMonthWeekArray[i].split('-')[0]
    if (new Date( dateMonthStr ).getTime() === new Date( nextDate ).getTime()) {
        availableAccountsForToday.push(accountsByMonthWeekArray[i])
    }
}
console.log("availableAccountsForToday", availableAccountsForToday);

return availableAccountsForToday;
}

function getAvailableAccountsForToday( checkedAccountForTodayStr, passedAvailableAccountsForTodayArray )
{

console.log("checkedAccountForTodayStr",checkedAccountForTodayStr)
var nextDate = getAvaliableDate()
var availableAccountsForToday = []
for (var i = 0; i < accountsByMonthWeekArray.length; i++) {
	var dateMonthStr = accountsByMonthWeekArray[i].split('-')[0]
    if (new Date( dateMonthStr ).getTime() === new Date( nextDate ).getTime()) {
        availableAccountsForToday.push(accountsByMonthWeekArray[i])
    }
}

if( passedAvailableAccountsForTodayArray!=undefined )
{
	availableAccountsForToday = passedAvailableAccountsForTodayArray
}

if( checkedAccountForTodayStr==undefined )
{ // if getting getAvailableAccountsForToday for first time then run this block

console.log("availableAccountsForToday", availableAccountsForToday);

//return availableAccountsForToday[0];
return [ availableAccountsForToday[0], availableAccountsForToday ];
}


else if( checkedAccountForTodayStr!=undefined )
{ // if getting getAvailableAccountsForToday for second or more time then run this block

//console.log("availableAccountsForToday", availableAccountsForToday);
var indexOfCheckedAccountForTodayStr = availableAccountsForToday.indexOf(checkedAccountForTodayStr)
var nextAccount = availableAccountsForToday[ indexOfCheckedAccountForTodayStr +1 ]
if( indexOfCheckedAccountForTodayStr !=-1 && availableAccountsForToday.length > 1 && nextAccount!=undefined )
{// if availableAccountsForToday are more than 1, then return next account after increasing index to checking for apify credit

//return nextAccount;
return [ nextAccount, availableAccountsForToday ];
}
else
{

var upcomingDate = checkedAccountForTodayStr.split('-')[0]
//console.log('fetch next date accounts')
console.log('now checking for upcomingDate', upcomingDate)
var nextDate = getAvaliableDate( upcomingDate )
var availableAccountsForToday = []
for (var i = 0; i < accountsByMonthWeekArray.length; i++) {
	var dateMonthStr = accountsByMonthWeekArray[i].split('-')[0]
    if (new Date( dateMonthStr ).getTime() === new Date( nextDate ).getTime()) {
        availableAccountsForToday.push(accountsByMonthWeekArray[i])
    }
}


console.log("availableAccountsForUpcomingDate", upcomingDate, availableAccountsForToday);
//return availableAccountsForToday[0];
return [ availableAccountsForToday[0], availableAccountsForToday ];

}





}


}

function getAccountDetailsObject( availableAccountStr )
{
	//availableAccountStr = '04 Aug-org9 (08:53:00 PM) moxafa5631'
	var org = availableAccountStr.split('-')[1].split(' ')[0] 
	var email = availableAccountStr.split('_')[1]
	var accountDetailsObject = accountsWithDetails[ email ][ org ]
	return accountDetailsObject;
}



	//var apifyURL = 'https://api.apify.com/v2/users/me/limits?token=apify_api_miYNvXi5huhwqWuSRP06rkqf5duqKK3u0tcL'
	
async function checkApifyAccountCredit(accountDetailsObject) {
    var personalAPIToken = accountDetailsObject['personalAPIToken'];
    var apifyURL = 'https://api.apify.com/v2/users/me/limits?token=' + personalAPIToken;

    try {
        // Fetch data using the Fetch API
        const response = await fetch(apifyURL);

        // Check if the response was successful
        if (!response.ok) {
            throw new Error('Network response was not ok');
        }

        // Parse the response body as JSON
        const data = await response.json();

        // checking if apify account credit is used or not
        var currentCredit = data['data']['current']['monthlyUsageUsd'].toFixed(2);
        var monthlyCredit = data['data']['limits']['maxMonthlyUsageUsd'];
        var usagePercentage = (currentCredit / monthlyCredit) * 100;

        if (usagePercentage > 50) {
            console.log("fully used,", usagePercentage, currentCredit + '/' + monthlyCredit);
            return false;
        } else {
            console.log("fully empty,", usagePercentage, currentCredit + '/' + monthlyCredit);
            return true;
        }
    } catch (error) {
        // Handle any errors that occurred during the fetch
        console.error('Error:', error);
        return null;
    }
}



async function getOneAccountToBeUsed() {
	var tempcount = 0
	var loopTrueFalse = true
	var checkedAccountForTodayStr;
	var availableAccountsForToday;
	
    try {

	while( loopTrueFalse )
	{
	tempcount = tempcount+1
	//var availableAccountForTodayStr = getAvailableAccountsForToday( checkedAccountForTodayStr )
	var returnedArray = getAvailableAccountsForToday( checkedAccountForTodayStr, availableAccountsForTodayArray )
	var availableAccountForTodayStr = returnedArray[0]
	var availableAccountsForTodayArray = returnedArray[1]
	
	var gotAccountDetailsObject = getAccountDetailsObject( availableAccountForTodayStr )
	console.log(availableAccountForTodayStr, gotAccountDetailsObject );
	
	  var creditAvailOrNot = await checkApifyAccountCredit( gotAccountDetailsObject );
	  if( creditAvailOrNot==true )
	  {
	  loopTrueFalse = false
	   // console.log('Apify account credit status:', creditAvailOrNot);

	  }
	  else
	  {
		//creditAvailOrNot==true
		checkedAccountForTodayStr = availableAccountForTodayStr
	  }
      
	  //console.error('tempcount:', tempcount);
	  
	   if( tempcount==10 )
	  {
	  loopTrueFalse = false
	  }
	}
      
    } catch (error) {
        console.error('Error:', error);
    }
	
	console.log("got one account.. now we can start fetching data")
	
	
}

function saveObjectIntoGoogleDrive()
{

}

getOneAccountToBeUsed();

*/
</script>