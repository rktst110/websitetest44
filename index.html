 <script src="navbar.js"></script>
 <div id="navbar"></div>
 


  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
  
  <label for="year">Month Year:</label>
<select id="dataMonthYear" name="year" onchange="getFirestoreData()">
</select>

 <label for="year">Trading Date:</label>
<select id="dataTradingDate" name="year" onchange="setSelector()">
</select>

 <label for="year">Indices TimeValues:</label>
<select id="indicesTimeValues" name="year" onchange="getIndicesData()">
</select>

  <div id="firebaseData"></div>

  <script>
  var firestoreIndexObj ={}
  // Your web app's Firebase configuration
    /*
      var firebaseConfig = {
  apiKey: "AIzaSyD8UWgohYzfdxd2VEJPEPnESv0uKn3l1jE",
  authDomain: "test-b26f9.firebaseapp.com",
  databaseURL: "https://test-b26f9-default-rtdb.firebaseio.com",
  projectId: "test-b26f9",
  storageBucket: "test-b26f9.appspot.com",
  messagingSenderId: "1038914343166",
  appId: "1:1038914343166:web:0884d3c8766712d98115af"
};
    */
    
        
    var firebaseConfig = {
  apiKey: "AIzaSyBXNKL0XqFnP-6ditzU2_Ylim_p9RaKPQ0",
  authDomain: "nse-data-saving-2023-5hf5fgdrg.firebaseapp.com",
  projectId: "nse-data-saving-2023-5hf5fgdrg",
  storageBucket: "nse-data-saving-2023-5hf5fgdrg.appspot.com",
  messagingSenderId: "299919844456",
  appId: "1:299919844456:web:1f7ca6b2574c760b6387dd"
};
    
    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);

    // Get a reference to the Firestore database
    var db = firebase.firestore();


   
	var dataTemp ;
    
    
    
    function getFirestoreData()
	{
	document.getElementById('firebaseData').innerHTML = ""
	var monthYearCollection = document.getElementById('dataMonthYear').value
    //var usersRef = db.doc('/April 2023/26-Apr-2023/');
    //var usersRef = db.collection('May 2023')  
    var usersRef = db.collection(monthYearCollection)  

	
    // Retrieve all documents in the 'users' collection
    usersRef.get()
      .then(function(querySnapshot) {
      dataTemp = querySnapshot 
      //console.log( querySnapshot );
	  

	   const selectElement = document.getElementById("dataTradingDate");
	   selectElement.innerHTML = '<option>Select</option>'
        querySnapshot.forEach(function(doc) {

          //document.getElementById('firebaseData').innerHTML += (doc.id + " => " + JSON.stringify(doc.data()) + "<br>");
          //console.log(doc.id, " => ", doc.data());
		  firestoreIndexObj [doc.id] = doc.data()
		  const optionElement = document.createElement("option");
    optionElement.text = doc.id;
    selectElement.add(optionElement);
	
        });
      })
      .catch(function(error) {
        console.log("Error getting documents: ", error);
      });
	}
    
  </script>
  
 
 <script>
 
 function generateMonthYearFromDate(startDate) {
  const currentDate = new Date();
  const months = [];

  // Helper function to format the month and year as a string
  function formatDate(date) {
    const monthNames = [
      "January", "February", "March", "April", "May", "June", 
      "July", "August", "September", "October", "November", "December"
    ];
    const monthIndex = date.getMonth();
    const year = date.getFullYear();
    return monthNames[monthIndex] + " " + year;
  }

  // Loop through each month from startDate to currentDate
  let currentDateTemp = new Date(startDate.getTime());
  while (currentDateTemp <= currentDate) {
    months.push(formatDate(currentDateTemp));
    currentDateTemp.setMonth(currentDateTemp.getMonth() + 1);
  }

  // Add the options to the select element
  const selectElement = document.getElementById("dataMonthYear");
  for (let i = 0; i < months.length; i++) {
    const optionElement = document.createElement("option");
    optionElement.text = months[i];
    selectElement.add(optionElement);
  }
}

// Example usage: generate month and year from January 2022 till now
//const startDate = new Date(2022, 0, 1); // January 1st, 2022
generateMonthYearFromDate( new Date("Feb 2023") );


function setSelector()
{
	var tradingDate = document.getElementById('dataTradingDate').value
	var timeValuesArray = firestoreIndexObj[ tradingDate ]['Index']['index_performace']

const selectElement = document.getElementById("indicesTimeValues");
selectElement.innerHTML = '<option>Select</option>'
  for (let i = 0; i < timeValuesArray.length; i++) {
    const optionElement = document.createElement("option");
    optionElement.text = timeValuesArray[i];
    selectElement.add(optionElement);
  }

}

function getIndicesData()
{
	var selectedMonthYear = document.getElementById('dataMonthYear').value
	var selectedTradingDate = document.getElementById('dataTradingDate').value
	var selectedIndicesTimeValues = document.getElementById('indicesTimeValues').value

	document.getElementById('firebaseData').innerHTML = ""
	var docPath = '/'+selectedMonthYear+'/'+selectedTradingDate+'/index_performace/'+selectedIndicesTimeValues
	
    //var usersRef = db.doc('/April 2023/26-Apr-2023/');
    var usersRef = db.doc( docPath );
    //var usersRef = db.collection('May 2023')  
    //var usersRef = db.collection(monthYearCollection)  

	
    // Retrieve all documents in the 'users' collection
    usersRef.get()
      .then(function(doc) {
      //dataTemp = querySnapshot 
      //console.log( querySnapshot );
	  document.getElementById('firebaseData').innerHTML += (doc.id + " => " + JSON.stringify(doc.data()) + "<br>");
   
      })
      .catch(function(error) {
        console.log("Error getting documents: ", error);
      });

}


 </script>
 
 
