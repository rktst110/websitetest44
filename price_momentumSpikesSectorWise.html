
<!-- Importing Firebase SDK Starts Here-->
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.6.5/firebase-firestore.js"></script>
 <!-- Importing Firebase SDK Ends Here-->
 
 <!-- Importing JS files for charts of CanvaJs & HighCharts Starts Here-->
<script src="https://cdn.canvasjs.com/canvasjs.min.js"></script>
<script src="https://code.highcharts.com/highcharts.js"></script>
<script src="https://code.highcharts.com/modules/heatmap.js"></script>
<script src="https://code.highcharts.com/modules/treemap.js"></script>
<script src="https://code.highcharts.com/modules/exporting.js"></script>
<script src="https://code.highcharts.com/modules/export-data.js"></script>
<script src="https://code.highcharts.com/modules/accessibility.js"></script>
 <!-- Importing JS files for charts of CanvaJs & HighCharts Ends Here-->
 

  <script src="functions/commonFunctions.js"></script>
  <script src="functions/tableSortingFunctons.js"></script>
 <script src="functions/importFiles.js"></script>
 <script src="functions/firebase.js"></script>
 <script src="functions/firebaseFunctions.js"></script>
<script src="functions/indexedDBFunctions.js"></script>

 <div id="importedContent"></div>
 
 <title>Momentum Spike</title>
 
 

<style>
body {
  margin: 0;
  font-family: Arial, Helvetica, sans-serif;
  background-color: #555;
  color: white; 
   text-align: center;
  }
  
   
 .column {
  float: left;
  padding: 0.5px;
  height: 550px;
  width: 42%;
  margin-top:10px;
}

.Left {
  width: 31.5%;
  margin-left:1%;
}

.Right {
  width: 31.5%;
  margin-left:1%;
  margin-bottom:15px;
}

.row:after {
  content: "";
  display: table;
  clear: both;
  text-align: center;
}

@media screen and (max-width: 800px) {
  .column {
    width: 98%;
	font-size: 15px;
	margin-left:1%;
	margin-right:1%;
  margin-bottom:12px;
  }
}


.containerClass
 {
  height: 550px;
  width: 100%;
}

</style>
<style> *, *:before, *:after {box-sizing: border-box;}body {font-family: -apple-system, ".SFNSText-Regular", "Helvetica Neue", "Roboto", "Segoe UI", sans-serif;}.toggle {cursor: pointer;display: inline-block;}.toggle-switch {display: inline-block;background: #ccc;border-radius: 16px;width: 58px;height: 32px;position: relative;vertical-align: middle;transition: background 0.25s;}.toggle-switch:before, .toggle-switch:after {content: "";}.toggle-switch:before {display: block;background: linear-gradient(to bottom, #fff 0%, #eee 100%);border-radius: 50%;box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.25);width: 24px;height: 24px;position: absolute;top: 4px;left: 4px;transition: left 0.25s;}.toggle:hover .toggle-switch:before {background: linear-gradient(to bottom, #fff 0%, #fff 100%);box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.5);}.toggle-checkbox:checked + .toggle-switch {background: #56c080;}.toggle-checkbox:checked + .toggle-switch:before {left: 30px;}.toggle-checkbox {position: absolute;visibility: hidden;}.toggle-label {margin-left: 5px;position: relative;top: 2px;} </style>
		


 <label>Month Year:</label>
<select id="monthYear" onchange="getFirestoreData()">
</select>

 <label> | Trading Date:</label>
<select id="tradingDate" onchange="setCommonSelectors()">
</select>


 <label> | Common TimeValues:</label>
<select id="commonTimeValues" onchange="saveSelectedValues();fetchDataForAllSegments()">
</select>

&nbsp; | &nbsp;&nbsp;
<button id="dataRefreshButton" onclick="getFirestoreData('refresh','')">Refresh</button>
&nbsp;&nbsp;<button id="dataRefreshButton" onclick="getFirestoreData('live','')">Live</button>

<hr>

 <label> Equity TimeValues:</label>
<select id="marketType" onchange="getEquityData()">
<option>FnO</option>
<option>ALL</option>
<option>AllStocksTraded</option>
</select>
<select id="equityTimeValues" onchange="getEquityData()">
</select>

	
 <span class="toggle-label">Show Tables :  </span> <label class="toggle">  <input id="showTablesOnOff" class="toggle-checkbox" type="checkbox" onchange="getEquityData()"> <div class="toggle-switch"></div> </label>   

 <span class="toggle-label"> | Without FnO :  </span> <label class="toggle">  <input id="withoutFnO" class="toggle-checkbox" type="checkbox" onchange="getEquityData()"> <div class="toggle-switch"></div> </label>   

<br>


<!--Content Start From Here-->

<div class="row">
  <div class="column Left" style="background-color:#aaa;">
<div class="spaceBetweenTables">  	<div id="spike5mTableContainer" class="containerClass"></div> </div>
	
  </div>
  <div class="column Right" style="background-color:#bbb;">
<div class="spaceBetweenTables">  	<div id="spike10mTableContainer" class="containerClass"></div> </div>

  </div>
  
  <div class="column Right" style="background-color:#bbb;">
<div class="spaceBetweenTables">  	<div id="spike15mTableContainer" class="containerClass"></div> </div>

  </div>
  
 </div>

<!--Content Ends Here-->

<!--Sector wise spikes Content Start From Here-->

<div class="row">
  <div class="column Left" style="background-color:#aaa;">
<div class="spaceBetweenTables">  	<div id="spike5mTableContainer_sectors" class="containerClass"></div> </div>
	
  </div>
  <div class="column Right" style="background-color:#bbb;">
<div class="spaceBetweenTables">  	<div id="spike10mTableContainer_sectors" class="containerClass"></div> </div>

  </div>
  
  <div class="column Right" style="background-color:#bbb;">
<div class="spaceBetweenTables">  	<div id="spike15mTableContainer_sectors" class="containerClass"></div> </div>

  </div>
  
 </div>

<!--Sector wise spikes Content Ends Here-->

<!--Sector stocks Content Start From Here-->
<div class="row">
	<center>
	<button onclick="document.getElementById('tableListSelector').value='FnO';getEquityDataForSectorStocks()">FnO</button>
	<button onclick="document.getElementById('tableListSelector').value='NIFTY_50';getEquityDataForSectorStocks()">Nifty 50</button>
   <button onclick="document.getElementById('tableListSelector').value='NIFTY_BANK';getEquityDataForSectorStocks()">Banks</button>
   <button onclick="document.getElementById('tableListSelector').value='NIFTY_FIN_SERVICE';getEquityDataForSectorStocks()">Finance</button>
   <button onclick="document.getElementById('tableListSelector').value='NIFTY_MIDCAP_150';getEquityDataForSectorStocks()">Midcap</button>
    | List:
	<select id="tableListSelector" aria-labelledby="expiryLbl" onchange="getEquityDataForSectorStocks()"> <option value="FnO">FnO</option> </select>
		
 <span class="toggle-label">| Show Tables :  </span> <label class="toggle">  <input id="showTablesForSectorStocksOnOff" class="toggle-checkbox" type="checkbox" onchange="getEquityDataForSectorStocks()" checked> <div class="toggle-switch"></div> </label>   
</center>	<br>
  
</div>
<!--Sector stocks Content Ends Here-->

<div class="row">
  <div class="column Left" style="background-color:#aaa;">
<div class="spaceBetweenTables">  	<div id="spike5mTableContainer_sectorStocks" class="containerClass"></div> </div>
	
  </div>
  <div class="column Right" style="background-color:#bbb;">
<div class="spaceBetweenTables">  	<div id="spike10mTableContainer_sectorStocks" class="containerClass"></div> </div>

  </div>
  
  <div class="column Right" style="background-color:#bbb;">
<div class="spaceBetweenTables">  	<div id="spike15mTableContainer_sectorStocks" class="containerClass"></div> </div>

  </div>
  
 </div>




<script>
function fetchDataForAllSegments()
{
setEquitySelectorTimeValues( "syncWithCommonTime" );
}
</script>


<!-- Indices Code Starts Here -->
<script>
var sectorStockNamesObj;
function setEquitySelectorTimeValues( passedValue )
{
	var tradingDate = document.getElementById('tradingDate').value
	var selectedMarketTypeValue = document.getElementById('marketType').value
	
	var timeValuesArray = firestoreIndexObj[ tradingDate ]['Index']['equity_market'][selectedMarketTypeValue]
	var selectElementRef = document.getElementById("equityTimeValues");
	
	handleTimeValues( passedValue, timeValuesArray, selectElementRef, getEquityData )
}

async function getEquityData()
{
	var selectedMonthYear = document.getElementById('monthYear').value
	var selectedTradingDate = document.getElementById('tradingDate').value
	var selectedTimeValueRef = document.getElementById('equityTimeValues')
	var selectedMarketTypeValue = document.getElementById('marketType').value
	
	var selectedTimeValue = selectedTimeValueRef.value
		
	var collectioPath = '/'+selectedMonthYear+'/'+selectedTradingDate+'/sector_stockNames/'
	sectorStockNamesObj = await fetchSectorStockNamesCollectionData( collectioPath )
	
	var docPathForDeliveryData = '/'+selectedMonthYear+'/'+selectedTradingDate+'/delivery_data/delivery_data'
	var deliveryDataObj = await fetchDeliveryDataDocData( docPathForDeliveryData )
	
	
	var docPathForEquity = '/'+selectedMonthYear+'/'+selectedTradingDate+'/equity_market/'+selectedMarketTypeValue+'/'+selectedTimeValue+'/'+selectedTimeValue
	var equityDataObj = JSON.parse( (await fetchFirebaseDocData( docPathForEquity ) ) ['data'] )

	var collectioPath = '/'+selectedMonthYear+'/'+selectedTradingDate+'/'
	var calculatedEODDeliveryDataObj = await fetchCalculatedEODDeliveryData( collectioPath )
	
	
	var timeValuePrev5minutes = ''
	var equityDataObjPrev5m = {}
	if( selectedTimeValueRef.options[selectedTimeValueRef.selectedIndex - 3] !=undefined )
	{
	var tableContainerID = 'spike5mTableContainer'
	var tableID = 'spike5mTable'
	var tableCaption = '5 Minutes Spike'
	timeValuePrev5minutes = selectedTimeValueRef.options[selectedTimeValueRef.selectedIndex - 3].value
		var docPathForEquityPrev5m = '/'+selectedMonthYear+'/'+selectedTradingDate+'/equity_market/'+selectedMarketTypeValue+'/'+timeValuePrev5minutes+'/'+timeValuePrev5minutes
	
	equityDataObjPrev5m =  JSON.parse( (await fetchFirebaseDocData( docPathForEquityPrev5m ) ) ['data'] )
		//console.log( "equityDataObj", equityDataObj)
		//console.log( "equityDataObjPrev5m", equityDataObjPrev5m)
	show_momentum_spike_Data( tableCaption, tableContainerID, tableID, selectedTimeValue, timeValuePrev5minutes, equityDataObj, equityDataObjPrev5m, JSON.parse( deliveryDataObj['data'] ), selectedTradingDate, calculatedEODDeliveryDataObj)
	
	var tableContainerID = 'spike5mTableContainer_sectors'
	var tableID = 'spike5mTable_sectors'
	var tableCaption = '5 Minutes Spike'
	show_sector_momentum_spike_Data( tableCaption, tableContainerID, tableID, selectedTimeValue, timeValuePrev5minutes, equityDataObj, equityDataObjPrev5m, JSON.parse( deliveryDataObj['data'] ), selectedTradingDate)
	//show_sector_stocks_momentum_spike_Data( tableCaption, tableContainerID, tableID, selectedTimeValue, timeValuePrev5minutes, equityDataObj, equityDataObjPrev5m, JSON.parse( deliveryDataObj['data'] ), selectedTradingDate)
	
	}
	
	var timeValuePrev10minutes = ''
	var equityDataObjPrev10m = {}
	if( selectedTimeValueRef.options[selectedTimeValueRef.selectedIndex - 5] !=undefined )
		{
		var tableContainerID = 'spike10mTableContainer'
		var tableID = 'spike10mTable'
		var tableCaption = '10 Minutes Spike'
		timeValuePrev10minutes = selectedTimeValueRef.options[selectedTimeValueRef.selectedIndex - 5].value
		var docPathForEquityPrev10m = '/'+selectedMonthYear+'/'+selectedTradingDate+'/equity_market/'+selectedMarketTypeValue+'/'+timeValuePrev10minutes+'/'+timeValuePrev10minutes

		equityDataObjPrev10m =  JSON.parse(  ( await fetchFirebaseDocData( docPathForEquityPrev10m ) )['data'] )
		
		show_momentum_spike_Data( tableCaption, tableContainerID, tableID, selectedTimeValue, timeValuePrev10minutes, equityDataObj, equityDataObjPrev10m, JSON.parse( deliveryDataObj['data'] ), selectedTradingDate, calculatedEODDeliveryDataObj )
		
		var tableContainerID = 'spike10mTableContainer_sectors'
		var tableID = 'spike10mTable_sectors'
		
		show_sector_momentum_spike_Data( tableCaption, tableContainerID, tableID, selectedTimeValue, timeValuePrev10minutes, equityDataObj, equityDataObjPrev10m, JSON.parse( deliveryDataObj['data'] ), selectedTradingDate)
		}


	var timeValuePrev15minutes = ''
	var equityDataObjPrev15m = {}
	if( selectedTimeValueRef.options[selectedTimeValueRef.selectedIndex - 8] !=undefined )
	{
	var tableContainerID = 'spike15mTableContainer'
	var tableID = 'spike15mTable'
	var tableCaption = '15 Minutes Spike'
	timeValuePrev15minutes = selectedTimeValueRef.options[selectedTimeValueRef.selectedIndex - 8].value
		var docPathForEquityPrev15m = '/'+selectedMonthYear+'/'+selectedTradingDate+'/equity_market/'+selectedMarketTypeValue+'/'+timeValuePrev15minutes+'/'+timeValuePrev15minutes
	
	equityDataObjPrev15m = JSON.parse( (await fetchFirebaseDocData( docPathForEquityPrev15m ) ) ['data'] )
	//equityDataObjPrev15m = JSON.parse( await fetchFirebaseDocData( docPathForEquityPrev15m ) )['data'] 
	show_momentum_spike_Data( tableCaption, tableContainerID, tableID, selectedTimeValue, timeValuePrev15minutes, equityDataObj, equityDataObjPrev15m, JSON.parse( deliveryDataObj['data'] ), selectedTradingDate, calculatedEODDeliveryDataObj )
	
	var tableContainerID = 'spike15mTableContainer_sectors'
	var tableID = 'spike15mTable_sectors'
	show_sector_momentum_spike_Data( tableCaption, tableContainerID, tableID, selectedTimeValue, timeValuePrev15minutes, equityDataObj, equityDataObjPrev15m, JSON.parse( deliveryDataObj['data'] ), selectedTradingDate)
	}
		
	//addEventListnerInTables()

	add_Sectors_In_HeatMapSelector()
	//getEquityDataForSectorStocks()
	
}


async function show_momentum_spike_Data( tableCaption, tableContainerID, tableID, currentTimeValue, previousTimeValue, currentEquityDataObj, previousEquityDataObj, deliveryDataObj, selectedTradingDate, calculatedEODDeliveryDataObj )
//async function show_momentum_spike_Data( selectedSpurtsTimeValue, selectedSpurtsTimeValuePrevious, selectedTradingDate, equityDataObj, equityDataObjPrevious, spurtsDataObj, spurtsDataObjPrevious, deliveryDataObj )
{
	 document.getElementById(tableContainerID).innerHTML = "";
	

	var niftyTotalMarketObject = currentEquityDataObj['data']
	var niftyTotalMarket2MinutePreviousObject = previousEquityDataObj['data']
	//console.log(niftyTotalMarketObject,niftyTotalMarket2MinutePreviousObject)

	var tempDataObj = {}
	  var onlyEquityTableStr = ' <div class=""> <div class="spaceBetweenTablesSpurtsEquity" style="height:550px;"> <table id="'+tableID+'"> <caption style="caption-side:top"> '+tableCaption+' | '+selectedTradingDate+' | '+previousTimeValue+'-'+currentTimeValue+'</caption> <thead> <tr class="tableRowClass">'
	  +'<th>Symbol</th>'
	  +' <th>Chg%</th>'
	  +' <th>DChg%</th>'
	  +' <th>DC%Fac</th>'
	  +' <th>O=H</th>'
	  +' <th>O=L</th>'
	 //  +' <th>T.O.</th>'
	   
	   +' <th>P.Spike</th>'
	   +' <th>Fac</th>'
	   +' <th>High</th>'
	   +' <th>Low</th>'
	   
	   +' <th>P.Spike</th>'
	   +' <th>V.Spike</th>'
	   +' <th>PV.Spike</th>'
	   
	 //+' <th>Money</th>'
	  +' <th>20DAV</th>'
	  
	  +' <th>DQ</th>'
	  +' <th>D%</th>'
	  +' <th>Rng</th>'
	  +' </tr> </thead> <tbody>'

		//for (var S=0; S<spurtsInOIUnderlyingsObject.length ;S++ ) { // loop for accessing all stocks of 754 stocks
		//var Symbol=spurtsInOIUnderlyingsObject[S]['symbol']
		for (var Symbol in niftyTotalMarketObject ) { // loop for accessing all stocks of 754 stocks
		var Symbol_temp = Symbol
		Symbol = Symbol.replace(/_.*/g,'')
		
		if( Symbol.includes('NIFTY')==false && Symbol !='NIFTY TOTAL MARKET' && deliveryDataObj["Symbols"][Symbol]!=undefined )
		{
		
		//var symbolArray = niftyTotalMarketObject[Symbol] //for short-handing
		var symbolArray = niftyTotalMarketObject[Symbol_temp] //for short-handing
		//var previousSymbolArray = niftyTotalMarket2MinutePreviousObject [Symbol]  
		var previousSymbolArray = niftyTotalMarket2MinutePreviousObject [Symbol_temp]  
		if( symbolArray !=undefined && previousSymbolArray !=undefined )
		{
		//console.log(Symbol)
	   var valueSpike = Math.abs ( ( ( symbolArray['totalTradedValue'] -  previousSymbolArray['totalTradedValue']) / previousSymbolArray['totalTradedValue'] ) * 100).toFixed(2)
	   var priceSpike =  ( ( ( symbolArray['lastPrice'] -  previousSymbolArray['lastPrice']) / previousSymbolArray['lastPrice'] ) * 100).toFixed(2)
	   var priceValueSpike = Math.abs( valueSpike * priceSpike ).toFixed(2)
	   //var valueSpike = Math.abs(  priceSpike ).toFixed(2)
	
	 var DayOpen = symbolArray['open'] 
	 var DayHigh = symbolArray['dayHigh'] 
	 var DayLow = symbolArray['dayLow'] 
	 var LastPrice = symbolArray['lastPrice'] 
	
	var DayChangePercentage =( ( (LastPrice - DayOpen) / DayOpen) *100).toFixed(2)
	
	var open_near_high_percentage =( ( (DayHigh - DayOpen) / DayOpen) *100).toFixed(2)
	var open_near_low_percentage =( ( (DayLow - DayOpen) / DayOpen) *100).toFixed(2)
	  
	  var DayRange =( ( (DayHigh - DayLow) / DayLow) *100).toFixed(2)
	  
    var near_high_pct = (1 - (DayHigh - LastPrice) / (DayHigh - DayLow)) * 100 
    var near_low_pct = (1 - (LastPrice - DayLow) / (DayHigh - DayLow)) * 100
	  
	var average20DaysValue = deliveryDataObj["Symbols"][Symbol]["calculatedData"]["averageValues"]["twentyDays"]

	var twentyDAV =( symbolArray["totalTradedValue"]  / average20DaysValue).toFixed(2)
	//var twentyDAV =( symbolArray["totalTradedValue"]*10000000  / average20DaysValue).toFixed(2)
	
	 		  tempDataObj[Symbol] ={
			 // "spike":valueSpike,
			  "spike":Math.abs ( priceSpike ),
			  "twentyDAV":twentyDAV,
			  //"pChange":symbolArray['pChange'],
			  "pChange":priceSpike,
			  //symbolArray
			  }

			  
		{
			onlyEquityTableStr +='<tr class="item"><td>'
			 +Symbol
			 +'</td><td>'
			+ symbolArray['pChange']  //pchange
			 //+'</td><td>'
			// +( symbolArray['totalTradedValue'] / 1000000).toFixed(0)  //(symbolArray[8] / 10000000).toFixed(2) //totalTradedValue
			//+'</td><td>'
			 //+ valueSpike //NoMinuspChng.toFixed(2) 
			// + valueSpike //NoMinuspChng.toFixed(2) 
			 //+ priceValueSpike //NoMinuspChng.toFixed(2) 
			 
			 +'</td><td>'
			+ DayChangePercentage
			
			 +'</td><td>'
			+ Math.abs( twentyDAV * DayChangePercentage ).toFixed(2)
			
			 +'</td><td>'
			+ Math.abs( open_near_high_percentage ).toFixed(2)
			
			 +'</td><td>'
			+ Math.abs( open_near_low_percentage ).toFixed(2)
			
			 +'</td><td>'
			+ Math.abs ( priceSpike )
			
			 +'</td><td>'
			+ Math.abs( twentyDAV * priceSpike).toFixed(2)
			//+ Math.abs( DayRange * twentyDAV).toFixed(2)
			
			 +'</td><td>'
			+ near_high_pct.toFixed(0) 
			
			 +'</td><td>'
			+ near_low_pct.toFixed(0) 
			 
			 +'</td><td>'
			+ priceSpike
			
			 +'</td><td>'
			+ valueSpike
			
			 +'</td><td>'
			+ priceValueSpike
			 
			 +'</td><td>'
			// + WFactor
			//+'</td><td>'
			+ twentyDAV
			
			//+ Math.abs( twentyDAV * symbolArray['pChange'] ).toFixed(2)
			//+ Math.abs( twentyDAV * priceSpike ).toFixed(2)
			
			+'</td><td>'
			+ (calculatedEODDeliveryDataObj[Symbol] ? calculatedEODDeliveryDataObj[Symbol] ['averageDeliveryQuantity'] : 0)
			+'</td><td>'
			+ (calculatedEODDeliveryDataObj[Symbol] ? calculatedEODDeliveryDataObj[Symbol] ['averageDeliveryPercentage'] : 0)
			+'</td><td>'
			+DayRange
			
			+'</td></tr>'
			
		
		}
		
		
		}
	}
		} //for Loop ENDS HERE
		
		onlyEquityTableStr +=' </tbody> </table>    </div>  </div>'
		
		
if( document.getElementById('showTablesOnOff').checked==true )
{ 
	document.getElementById(tableContainerID).innerHTML = onlyEquityTableStr
}
else
{
showSpikeChart( tableCaption, tableContainerID, tableID, currentTimeValue, previousTimeValue, selectedTradingDate, tempDataObj  )
}
	addEventListnerInTables()
}	//	show_volume_value_spike_Data() Function ENDS HERE

async function show_sector_momentum_spike_Data( tableCaption, tableContainerID, tableID, currentTimeValue, previousTimeValue, currentEquityDataObj, previousEquityDataObj, deliveryDataObj, selectedTradingDate  )
//async function show_momentum_spike_Data( selectedSpurtsTimeValue, selectedSpurtsTimeValuePrevious, selectedTradingDate, equityDataObj, equityDataObjPrevious, spurtsDataObj, spurtsDataObjPrevious, deliveryDataObj )
{
	// document.getElementById(tableContainerID).innerHTML = "";
	

	var niftyTotalMarketObject = currentEquityDataObj['data']
	var niftyTotalMarket2MinutePreviousObject = previousEquityDataObj['data']
	//console.log(niftyTotalMarketObject,niftyTotalMarket2MinutePreviousObject)

	var tempDataObj = {}
	
	for( var sector in sectorStockNamesObj )
	{
		var valueSpike =0
		//if( sector=='NIFTY_MID_SELECT' || sector=='NIFTY_50' || sector=='NIFTY_AUTO' || sector=='NIFTY_BANK' || sector=='NIFTY_CONSR_DURBL' || sector=='NIFTY_ENERGY' || sector=='NIFTY_FIN_SERVICE' || sector=='NIFTY_FMCG' || sector=='NIFTY_HEALTHCARE' || sector=='NIFTY_INFRA' || sector=='NIFTY_IT' || sector=='NIFTY_MEDIA' || sector=='NIFTY_METAL' || sector=='NIFTY_OIL_AND_GAS' || sector=='NIFTY_PHARMA' || sector=='NIFTY_PSE' || sector=='NIFTY_PSU_BANK' || sector=='NIFTY_PVT_BANK' || sector=='NIFTY_REALTY' || sector=='NIFTY_SERV_SECTOR' )
		if( sector=='NIFTY_MID_SELECT' || sector=='NIFTY_AUTO' || sector=='NIFTY_BANK' || sector=='NIFTY_CONSR_DURBL' || sector=='NIFTY_ENERGY' || sector=='NIFTY_FIN_SERVICE' || sector=='NIFTY_FMCG' || sector=='NIFTY_HEALTHCARE' || sector=='NIFTY_IT' || sector=='NIFTY_MEDIA' || sector=='NIFTY_METAL' || sector=='NIFTY_OIL_AND_GAS' || sector=='NIFTY_PHARMA' || sector=='NIFTY_PSE' || sector=='NIFTY_PSU_BANK' || sector=='NIFTY_PVT_BANK' || sector=='NIFTY_REALTY'  )
	
		{
		for (var Symbol of sectorStockNamesObj[ sector ] ) 
		{ // loop for accessing all stocks of 754 stocks
		
		if( deliveryDataObj["Symbols"][Symbol]!=undefined )
		{
		
		var symbolArray = niftyTotalMarketObject[Symbol] //for short-handing
		var previousSymbolArray = niftyTotalMarket2MinutePreviousObject [Symbol]  
		if( symbolArray !=undefined && previousSymbolArray !=undefined )
		{
			//valueSpike = Number(valueSpike) + ( ( ( symbolArray['totalTradedValue'] -  previousSymbolArray['totalTradedValue']) / previousSymbolArray['totalTradedValue'] ) * 100)
			valueSpike = Number(valueSpike) + Math.abs( ( ( symbolArray['lastPrice'] -  previousSymbolArray['lastPrice']) / previousSymbolArray['lastPrice'] ) * 100)
			var average20DaysValue = deliveryDataObj["Symbols"][Symbol]["calculatedData"]["averageValues"]["twentyDays"]
			var twentyDAV =( symbolArray["totalTradedValue"]  / average20DaysValue).toFixed(2)
	 		

			  
		
		}
	}
		} //for Loop ENDS HERE
		
		
			tempDataObj[sector] ={
			  "spike":valueSpike.toFixed(2),
			  //"pChange":symbolArray['pChange']
			  "pChange":1
			  }
		}
	}
	//console.log( 'tempDataObj', tempDataObj )
	
	/*
	
	  var onlyEquityTableStr = ' <div class=""> <div class="spaceBetweenTablesSpurtsEquity" style="height:550px;"> <table id="'+tableID+'"> <caption style="caption-side:top"> '+tableCaption+' | '+selectedTradingDate+' | '+previousTimeValue+'-'+currentTimeValue+'</caption> <thead> <tr class="tableRowClass">'
	  +'<th>Symbol</th>'
	  +' <th>Chg%</th>'
	   +' <th>T.O.</th>'
	   +' <th>Spike</th>'
	 //+' <th>Money</th>'
	  +' <th>20DAV</th>'
	  +' </tr> </thead> <tbody>'

		//for (var S=0; S<spurtsInOIUnderlyingsObject.length ;S++ ) { // loop for accessing all stocks of 754 stocks
		//var Symbol=spurtsInOIUnderlyingsObject[S]['symbol']
		for (var Symbol in niftyTotalMarketObject ) { // loop for accessing all stocks of 754 stocks
		if( Symbol.includes('NIFTY')==false && Symbol !='NIFTY TOTAL MARKET' && deliveryDataObj["Symbols"][Symbol]!=undefined )
		{
		
		var symbolArray = niftyTotalMarketObject[Symbol] //for short-handing
		var previousSymbolArray = niftyTotalMarket2MinutePreviousObject [Symbol]  
		if( symbolArray !=undefined && previousSymbolArray !=undefined )
		{
	   var valueSpike = ( ( ( symbolArray['totalTradedValue'] -  previousSymbolArray['totalTradedValue']) / previousSymbolArray['totalTradedValue'] ) * 100).toFixed(2)
	
	var average20DaysValue = deliveryDataObj["Symbols"][Symbol]["calculatedData"]["averageValues"]["twentyDays"]

	var twentyDAV =( symbolArray["totalTradedValue"]  / average20DaysValue).toFixed(2)
	 		  tempDataObj[Symbol] ={
			  "spike":valueSpike,
			  "pChange":symbolArray['pChange']
			  }

			  
		{
			onlyEquityTableStr +='<tr class="item"><td>'
			 +Symbol
			 +'</td><td>'
			+ symbolArray['pChange']  //pchange
			 +'</td><td>'
			 +( symbolArray['totalTradedValue'] / 1000000).toFixed(0)  //(symbolArray[8] / 10000000).toFixed(2) //totalTradedValue
			+'</td><td>'
			 + valueSpike //NoMinuspChng.toFixed(2) 
			 +'</td><td>'
			// + WFactor
			//+'</td><td>'
			+ twentyDAV
			+'</td></tr>'
			
		
		}
		}
	}
		} //for Loop ENDS HERE
		
		onlyEquityTableStr +=' </tbody> </table>    </div>  </div>'
		
		
if( document.getElementById('showTablesOnOff').checked==true )
{ 
	document.getElementById(tableContainerID).innerHTML = onlyEquityTableStr
}
else
{
showSpikeChart( tableCaption, tableContainerID, tableID, currentTimeValue, previousTimeValue, selectedTradingDate, tempDataObj  )
}
	
	*/
	showSpikeChart( tableCaption, tableContainerID, tableID, currentTimeValue, previousTimeValue, selectedTradingDate, tempDataObj  )
}	//	show_volume_value_spike_Data() Function ENDS HERE

async function showSpikeChart ( tableCaption, tableContainerID, tableID, currentTimeValue, previousTimeValue, selectedTradingDate, returnedDataObj  )
{
	var indicesPerformanceObject = returnedDataObj
		console.log("indicesPerformanceObject",indicesPerformanceObject)
	var dataPointsArray=[]

	var tempObj={}
	for (var symbol in indicesPerformanceObject) {
		
		if( document.getElementById('withoutFnO').checked==true )
		{
			if( sectorStockNamesObj['FnO'].includes(symbol) == false )
			{
				tempObj[symbol]=returnedDataObj[symbol]["spike"]
				//tempObj[symbol]=returnedDataObj[symbol]["twentyDAV"]
			}
			
		}
		else
		{
			tempObj[symbol]=returnedDataObj[symbol]["spike"]
			//tempObj[symbol]=returnedDataObj[symbol]["twentyDAV"]
		}
		
		
	}
	
// tempObj is sorted by this code
//Object.keys(tempObj).sort((a,b) => tempObj[a]-tempObj[b]).forEach((symbol) => { 	// ascending sort
//console.log( Object.keys(tempObj).sort((a,b) => tempObj[b]-tempObj[a]).slice(0, 20).reverse() )
//Object.keys(tempObj).sort((a,b) => tempObj[a]-tempObj[b]).slice(0, 15).forEach((symbol) => {  	//  descending sort
 Object.keys(tempObj).sort((a,b) => tempObj[b]-tempObj[a]).slice(0, 18).reverse().forEach((symbol) => {  	//  descending sort
 //Object.keys(tempObj).sort((a,b) => tempObj[b]-tempObj[a]).reverse().forEach((symbol) => {  	//  descending sort
var temp={}
if(symbol !='NIFTY 50' && symbol !='NIFTY BANK')
//if(symbol !='NIFTY BANK')
{
	temp["label"]=symbol.replace(/NIFTY /g,'')
}
else{
	temp["label"]=symbol
}
	

		temp["y"]= Math.abs( tempObj[symbol]); 
		//temp["y"]= Math.abs( returnedDataObj[symbol]["pChange"]); 
		//var pchange = tempObj[symbol]["spike"]
		var pchange = returnedDataObj[symbol]["pChange"]
		if( pchange <0) 
		{
			temp["color"]="#cd5652"
		}
		else if( pchange>0) 
		{
			temp["color"]="#3a7dd4"
		}
		else if( pchange==0 ) 
		{
			//temp["color"]="black"
			temp["color"]="#3a7dd4"
		}
		
		dataPointsArray.push(temp)
	});
	

// this section is for plotting indices chart for simple perchange change of single column bar
var chart = new CanvasJS.Chart(tableContainerID, {
	animationEnabled: false,
	theme: "dark2", // "light1", "light2", "dark1", "dark2"
	title: {
		//text: "GDP Growth Rate - 2016"
	},
	subtitles: [{
			//text: "Subtitle 1"
		  },{
			text:  tableCaption+' | '+selectedTradingDate +' | '+previousTimeValue +'-'+currentTimeValue,
			//verticalAlign: "top",

			 //horizontalAlign: "right",
	
			 //fontSize: 15,
			 fontSize: 13,
			//dockInsidePlotArea: true
			dockInsidePlotArea: false
	}],
	
	toolTip: {
			//fontSize: 19,
			fontSize: 15,
	},
	axisY: {
		//title: "Growth Rate (in %)",
		//includeZero: true,
		//suffix: "%",
		gridThickness: 0.1,
		//labelFontSize: 18,
		labelFontSize: 11, // bottom size for change%
	},
	axisX: {
		interval: 1,
		//title: "Countries"
		includeZero: true,
		 //labelFontSize: 17,
		 labelFontSize: 13, // vertical axis size for text
		 //labelFontWeight: "bold",
		 lineThickness: 0,
		 tickLength: 0,
	},
	dataPointWidth: 10,
	data: [{
		//indexLabel: "{y}",
		//indexLabelFontSize: 18,
		click: onClick,
		//type: "column",
		type: "bar",
		yValueFormatString: "#,##0.0#\"%\"",
		dataPoints: dataPointsArray
	}]
});


console.log("dataPointsArray",dataPointsArray)
chart.render();
//chart2.render();

} // showIndicesPerformanceChart ENDS HERE


function onClick(e) {

		//var label=e.dataPoint.label
		var label=e.dataPoint.label.replace(/ \(.*/g, '')
		var labelToScroll;
		{
		
				labelToScroll = label
				
				document.getElementById("tableListSelector").value = labelToScroll ;
				getEquityDataForSectorStocks();
				document.getElementById("tableListSelector").scrollIntoView();
			/*
			if( label=='NIFTY 50' || label=='NIFTY BANK')
			{
				
				labelToScroll = label.replace(/ /g, '_')
				
				document.getElementById("tableListSelector").value = labelToScroll ;
				getEquityDataForSectorStocks();
				document.getElementById("tableListSelector").scrollIntoView();
			}
			else
			{
				labelToScroll = 'NIFTY_'+label.replace(/ /g, '_')
				
				document.getElementById("tableListSelector").value = labelToScroll ;
				getEquityDataForSectorStocks();
				document.getElementById("tableListSelector").scrollIntoView();
			}
			*/
		}

		
}


function add_Sectors_In_HeatMapSelector( )
{
	//console.log( "sectorStockNamesObj", sectorStockNamesObj)
	
	if( sectorStockNamesObj !=undefined)
	{
	if( document.getElementById("tableListSelector").getElementsByTagName('option').length <=1 )
	{
	//document.getElementById("heatMapSectorSelector").innerHTML = "";
	document.getElementById("tableListSelector").innerHTML = "";
	
	var option = document.createElement("option");
	option.value = "ALL BANKS";
	option.text = "ALL BANKS";
	//document.getElementById("heatMapSectorSelector").add(option);
	
	
	
	for ( var sectorName in sectorStockNamesObj ) {
		
		if( sectorName != 'Template' )
		{
		var option = document.createElement("option");
		option.value = sectorName;
		option.text = sectorName;
		//document.getElementById("heatMapSectorSelector").add(option);
		
		var option = document.createElement("option");
		option.value = sectorName;
		option.text = sectorName;	
		document.getElementById("tableListSelector").add(option);
		}
	}
	//document.getElementById('heatMapSectorSelector').value=document.getElementById('heatMapSectorSelector').getElementsByTagName('option')[2].value
	//document.getElementById('heatMapSectorSelector').value="NIFTY_50"
	document.getElementById('tableListSelector').value="FnO"
	}
	
	//showHeatMapChart(sectorStockNamesObj)
	//showHeatMapChart()
	}
	
} // add_Sectors_In_HeatMapSelector() ENDS HERE


async function getEquityDataForSectorStocks()
{
	var selectedMonthYear = document.getElementById('monthYear').value
	var selectedTradingDate = document.getElementById('tradingDate').value
	var selectedTimeValueRef = document.getElementById('equityTimeValues')
	var selectedMarketTypeValue = document.getElementById('marketType').value
	
	var selectedTimeValue = selectedTimeValueRef.value
	
	var docPathForDeliveryData = '/'+selectedMonthYear+'/'+selectedTradingDate+'/delivery_data/delivery_data'
	var deliveryDataObj = await fetchDeliveryDataDocData( docPathForDeliveryData )
	
	var docPathForEquity = '/'+selectedMonthYear+'/'+selectedTradingDate+'/equity_market/'+selectedMarketTypeValue+'/'+selectedTimeValue+'/'+selectedTimeValue
	var equityDataObj = JSON.parse( (await fetchFirebaseDocData( docPathForEquity ) ) ['data'] )

	var collectioPath = '/'+selectedMonthYear+'/'+selectedTradingDate+'/'
	var calculatedEODDeliveryDataObj = await fetchCalculatedEODDeliveryData( collectioPath )
	

	var timeValuePrev5minutes = ''
	var equityDataObjPrev5m = {}
	if( selectedTimeValueRef.options[selectedTimeValueRef.selectedIndex - 3] !=undefined )
	{
	var tableContainerID = 'spike5mTableContainer_sectorStocks'
	var tableID = 'spike5mTable_sectorStocks'
	var tableCaption = '5 Minutes Spike'
	timeValuePrev5minutes = selectedTimeValueRef.options[selectedTimeValueRef.selectedIndex - 3].value
		var docPathForEquityPrev5m = '/'+selectedMonthYear+'/'+selectedTradingDate+'/equity_market/'+selectedMarketTypeValue+'/'+timeValuePrev5minutes+'/'+timeValuePrev5minutes
	
	equityDataObjPrev5m =  JSON.parse( (await fetchFirebaseDocData( docPathForEquityPrev5m ) ) ['data'] )
		//console.log( "equityDataObj", equityDataObj)
		//console.log( "equityDataObjPrev5m", equityDataObjPrev5m)
	//show_momentum_spike_Data( tableCaption, tableContainerID, tableID, selectedTimeValue, timeValuePrev5minutes, equityDataObj, equityDataObjPrev5m, JSON.parse( deliveryDataObj['data'] ), selectedTradingDate)
	
	//show_sector_momentum_spike_Data( tableCaption, tableContainerID, tableID, selectedTimeValue, timeValuePrev5minutes, equityDataObj, equityDataObjPrev5m, JSON.parse( deliveryDataObj['data'] ), selectedTradingDate)
	show_sector_stocks_momentum_spike_Data( tableCaption, tableContainerID, tableID, selectedTimeValue, timeValuePrev5minutes, equityDataObj, equityDataObjPrev5m, JSON.parse( deliveryDataObj['data'] ), selectedTradingDate, calculatedEODDeliveryDataObj )
	
	}
	
	
	var timeValuePrev10minutes = ''
	var equityDataObjPrev10m = {}
	if( selectedTimeValueRef.options[selectedTimeValueRef.selectedIndex - 5] !=undefined )
		{
		var tableContainerID = 'spike10mTableContainer_sectorStocks'
		var tableID = 'spike10mTable_sectorStocks'
		var tableCaption = '10 Minutes Spike'
		timeValuePrev10minutes = selectedTimeValueRef.options[selectedTimeValueRef.selectedIndex - 5].value
		var docPathForEquityPrev10m = '/'+selectedMonthYear+'/'+selectedTradingDate+'/equity_market/'+selectedMarketTypeValue+'/'+timeValuePrev10minutes+'/'+timeValuePrev10minutes

		equityDataObjPrev10m =  JSON.parse(  ( await fetchFirebaseDocData( docPathForEquityPrev10m ) )['data'] )
		
		show_sector_stocks_momentum_spike_Data( tableCaption, tableContainerID, tableID, selectedTimeValue, timeValuePrev10minutes, equityDataObj, equityDataObjPrev10m, JSON.parse( deliveryDataObj['data'] ), selectedTradingDate, calculatedEODDeliveryDataObj)
		}


	var timeValuePrev15minutes = ''
	var equityDataObjPrev15m = {}
	if( selectedTimeValueRef.options[selectedTimeValueRef.selectedIndex - 8] !=undefined )
	{
	var tableContainerID = 'spike15mTableContainer_sectorStocks'
	var tableID = 'spike15mTable_sectorStocks'
	var tableCaption = '15 Minutes Spike'
	timeValuePrev15minutes = selectedTimeValueRef.options[selectedTimeValueRef.selectedIndex - 8].value
		var docPathForEquityPrev15m = '/'+selectedMonthYear+'/'+selectedTradingDate+'/equity_market/'+selectedMarketTypeValue+'/'+timeValuePrev15minutes+'/'+timeValuePrev15minutes
	
	equityDataObjPrev15m = JSON.parse( (await fetchFirebaseDocData( docPathForEquityPrev15m ) ) ['data'] )
	//equityDataObjPrev15m = JSON.parse( await fetchFirebaseDocData( docPathForEquityPrev15m ) )['data'] 
	show_sector_stocks_momentum_spike_Data( tableCaption, tableContainerID, tableID, selectedTimeValue, timeValuePrev15minutes, equityDataObj, equityDataObjPrev15m, JSON.parse( deliveryDataObj['data'] ), selectedTradingDate, calculatedEODDeliveryDataObj)
	}
	
		
	//addEventListnerInTables()
	
	
}


async function show_sector_stocks_momentum_spike_Data( tableCaption, tableContainerID, tableID, currentTimeValue, previousTimeValue, currentEquityDataObj, previousEquityDataObj, deliveryDataObj, selectedTradingDate, calculatedEODDeliveryDataObj )
//async function show_momentum_spike_Data( selectedSpurtsTimeValue, selectedSpurtsTimeValuePrevious, selectedTradingDate, equityDataObj, equityDataObjPrevious, spurtsDataObj, spurtsDataObjPrevious, deliveryDataObj )
{
	
	 document.getElementById(tableContainerID).innerHTML = "";
	
	var sectorStockArray = sectorStockNamesObj[ document.getElementById('tableListSelector').value ]
	//console.log("sectorStockArray",sectorStockArray)
	
	var niftyTotalMarketObject = currentEquityDataObj['data']
	var niftyTotalMarket2MinutePreviousObject = previousEquityDataObj['data']
	//console.log(niftyTotalMarketObject,niftyTotalMarket2MinutePreviousObject)
	

	var tempDataObj = {}
	  var onlyEquityTableStr = ' <div class=""> <div class="spaceBetweenTablesSpurtsEquity" style="height:550px;"> <table id="'+tableID+'"> <caption style="caption-side:top"> '+tableCaption+' | '+selectedTradingDate+' | '+previousTimeValue+'-'+currentTimeValue+'</caption> <thead> <tr class="tableRowClass">'
	+'<th>Symbol</th>'
	  +' <th>Chg%</th>'
	  +' <th>DChg%</th>'
	  +' <th>DC%Fac</th>'
	 //  +' <th>T.O.</th>'
	   
	   +' <th>P.Spike</th>'
	   +' <th>Fac</th>'
	   +' <th>High</th>'
	   +' <th>Low</th>'
	   
	   +' <th>P.Spike</th>'
	   +' <th>V.Spike</th>'
	   +' <th>PV.Spike</th>'
	   
	 //+' <th>Money</th>'
	  +' <th>20DAV</th>'
	  
	  +' <th>DQ</th>'
	  +' <th>D%</th>'
	  +' <th>Rng</th>'
	  +' </tr> </thead> <tbody>'

		//for (var S=0; S<spurtsInOIUnderlyingsObject.length ;S++ ) { // loop for accessing all stocks of 754 stocks
		//var Symbol=spurtsInOIUnderlyingsObject[S]['symbol']
		//for (var Symbol in niftyTotalMarketObject ) { // loop for accessing all stocks of 754 stocks
		for (var Symbol of sectorStockArray ) { // loop for accessing all stocks of 754 stocks
		if( Symbol.includes('NIFTY')==false && Symbol !='NIFTY TOTAL MARKET' && deliveryDataObj["Symbols"][Symbol]!=undefined )
		{
		
		var symbolArray = niftyTotalMarketObject[Symbol] //for short-handing
		var previousSymbolArray = niftyTotalMarket2MinutePreviousObject [Symbol]  
		if( symbolArray !=undefined && previousSymbolArray !=undefined )
		{
		


	  	   var valueSpike = Math.abs ( ( ( symbolArray['totalTradedValue'] -  previousSymbolArray['totalTradedValue']) / previousSymbolArray['totalTradedValue'] ) * 100).toFixed(2)
	   var priceSpike =  ( ( ( symbolArray['lastPrice'] -  previousSymbolArray['lastPrice']) / previousSymbolArray['lastPrice'] ) * 100).toFixed(2)
	   var priceValueSpike = Math.abs( valueSpike * priceSpike ).toFixed(2)
	   //var valueSpike = Math.abs(  priceSpike ).toFixed(2)

	 var DayOpen = symbolArray['open'] 
	 var DayHigh = symbolArray['dayHigh'] 
	 var DayLow = symbolArray['dayLow'] 
	 var LastPrice = symbolArray['lastPrice'] 
	
	var DayChangePercentage =( ( (LastPrice - DayOpen) / DayOpen) *100).toFixed(2)
	  
	  var DayRange =( ( (DayHigh - DayLow) / DayLow) *100).toFixed(2)
	  
    var near_high_pct = (1 - (DayHigh - LastPrice) / (DayHigh - DayLow)) * 100 
    var near_low_pct = (1 - (LastPrice - DayLow) / (DayHigh - DayLow)) * 100
	
	  
	  
	var average20DaysValue = deliveryDataObj["Symbols"][Symbol]["calculatedData"]["averageValues"]["twentyDays"]

	var twentyDAV =( symbolArray["totalTradedValue"]  / average20DaysValue).toFixed(2)
	 		 /*
			 tempDataObj[Symbol] ={
			  "spike":valueSpike,
			  "pChange":symbolArray['pChange']
			  }
			  */
			  
	 		  tempDataObj[Symbol] ={
			 // "spike":valueSpike,
			  "spike":Math.abs ( priceSpike ),
			  "twentyDAV":twentyDAV,
			  //"pChange":symbolArray['pChange'],
			  "pChange":priceSpike,
			  //symbolArray
			  }

			  
		{
			onlyEquityTableStr +='<tr class="item"><td>'
			 +Symbol
			 +'</td><td>'
			+ symbolArray['pChange']  //pchange
			 //+'</td><td>'
			// +( symbolArray['totalTradedValue'] / 1000000).toFixed(0)  //(symbolArray[8] / 10000000).toFixed(2) //totalTradedValue
			//+'</td><td>'
			 //+ valueSpike //NoMinuspChng.toFixed(2) 
			// + valueSpike //NoMinuspChng.toFixed(2) 
			 //+ priceValueSpike //NoMinuspChng.toFixed(2) 
			 
			 +'</td><td>'
			+ DayChangePercentage
			
			 +'</td><td>'
			+  Math.abs( twentyDAV * DayChangePercentage ).toFixed(2)
			
			 +'</td><td>'
			+ Math.abs ( priceSpike )
			
			 +'</td><td>'
			+ Math.abs( twentyDAV * priceSpike).toFixed(2)
			//+ Math.abs( DayRange * twentyDAV).toFixed(2)
			
			 +'</td><td>'
			+ near_high_pct.toFixed(0) 
			
			 +'</td><td>'
			+ near_low_pct.toFixed(0) 
			 
			 +'</td><td>'
			+ priceSpike
			
			 +'</td><td>'
			+ valueSpike
			
			 +'</td><td>'
			+ priceValueSpike
			 
			 +'</td><td>'
			// + WFactor
			//+'</td><td>'
			+ twentyDAV
			
			//+ Math.abs( twentyDAV * symbolArray['pChange'] ).toFixed(2)
			//+ Math.abs( twentyDAV * priceSpike ).toFixed(2)
			
			+'</td><td>'
			+ (calculatedEODDeliveryDataObj[Symbol] ? calculatedEODDeliveryDataObj[Symbol] ['averageDeliveryQuantity'] : 0)
			+'</td><td>'
			+ (calculatedEODDeliveryDataObj[Symbol] ? calculatedEODDeliveryDataObj[Symbol] ['averageDeliveryPercentage'] : 0)
			+'</td><td>'
			+DayRange
			
			+'</td></tr>'
			
		
		}
		}
	}
		} //for Loop ENDS HERE
		
		onlyEquityTableStr +=' </tbody> </table>    </div>  </div>'
		
		
if( document.getElementById('showTablesForSectorStocksOnOff').checked==true )
{ 
	document.getElementById(tableContainerID).innerHTML = onlyEquityTableStr
}
else
{
showSpikeChart( tableCaption, tableContainerID, tableID, currentTimeValue, previousTimeValue, selectedTradingDate, tempDataObj  )
}
	
	addEventListnerInTables()
}	//	show_volume_value_spike_Data() Function ENDS HERE

</script>
<!-- Indices Code Ends Here -->


<!-- Floating Buttons Code Starts Here -->
<style>		.float{	position:fixed;	width:25px;	height:50px;	bottom:16%;	right:10px;			border-radius:50px;	text-align:center;	}.vertical-centerFloat {   float: right;  margin: 0;  position: sticky;  top: 50%;  -ms-transform: translateY(-50%);  transform: translateY(-50%);	}  .Floatbtn{ margin-top:1px;} </style>
<div class="float"> 	<button class="Floatbtn" onclick="document.getElementById('commonTimeValues').scrollIntoView();"><b><span style="font-size:20px;">&#8593;</span></b></button><br/>	     <button class="Floatbtn" onclick="getFirestoreData('live','')"><b><span style="font-size:20px;">&#8883;</span></b></button>	</div>
<!-- Floating Buttons Code Ends Here -->


<script>
// Example usage: generate month and year from April 2023 till now
generateMonthYearFromDate( new Date("April 2023") );
</script>